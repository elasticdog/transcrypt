version: '3.6'

x-base: &base
  command: bats tests/
  volumes:
    - .:/tests/
    - ../transcrypt:/transcrypt
  build: &build
    context: .
    dockerfile: Dockerfile.ubuntu
    args:
      version: 20.04

services:

  ubuntu-16.04:
    <<: *base
    build:
      <<: *build
      args:
        version: 16.04

  ubuntu-18.04:
    <<: *base
    build:
      <<: *build
      args:
        version: 18.04

  ubuntu-20.04:
    <<: *base
    build:
      <<: *build
      args:
        version: 20.04
